<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>React4xp standalone page 2</title>

    <!-- You can get React and ReactDOM from CDN like this, if you want to skip the react4xp-runtime-externals step in build.gradle:
        <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
        <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
    -->
    <script src="/_/service/com.enonic.starter.react4xp/react4xp-externals"></script>

    <script src="/_/service/com.enonic.starter.react4xp/react4xp-client"></script>
    <script>
        React4xp._CLIENT_.loadDependenciesAsync(
            "SimpleGreeter",
            "/_/service/com.enonic.starter.react4xp",
            function() {
                console.log("Dependencies should be loaded.");
            }
        );
    </script>

</head>
<body>
    <h1>TESTING 2... TESTING 2...</h1>
    <p>Is this thing still on? OK, here comes another React4xp rendering:</p>

    <div id="target"></div>

    <script defer>
        function maybeRender() {
            console.log("Can I render now?");
            if (React4xp.SimpleGreeter) {
                console.log("Yes!!!");

                React4xp._CLIENT_.render(React4xp.SimpleGreeter, 'target', {worldOrSomething: "worldie"});

            } else {
                setTimeout(maybeRender, 25);
            }
        }
        maybeRender();
    </script>

    </body>
</html>
